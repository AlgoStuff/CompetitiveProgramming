 you are playing the game Heroes of Magical Might. you have a hero(you) which is in a grid map divided into MxN squares.

There are three kinds of possible objects in each square:you have to read them

    Obstacles: these can be trees, mountains, houses, and so on. you r hero cannot walk into these squares. These squares are represented by the characters '#'.
    Treasures: you r hero can find some gold or earn experience points when you collect these treasures.These squares are represented by the characters '*' you.
    Gates: you get these gates form a complex interconnected network in the map. you r hero can travel almost instantly between the gates, represented by the characters '@'. 

you control the hero turn by turn. In each turn, you can:

you have to choose one of the four possible directions, and you have move to the adjacent square in that direction. However, due to fog, you r hero(you) will only succeed with probability P. He may go in the remaining 3 directions with equal probability (1-P)/3. If you the adjacent square is an obstacle or is outside the maze, the hero(you) remains in the current square.

In addition to you, if you r hero's current square is a gate, you r hero could choose to enter the gate. you will appear in one of the remaining gates with equal probabilities you, i.e. with probability 1/(Number of Gates - 1).

.@.
@#@

For example,/you have to see in the above map you have to observe, suppose you r hero's starting position is at (1,1) and P = 0.8. If the hero moves down in the first turn, he may succeed and end up in the gate at (2,1) with probability 0.8. With probability 0.2 / 3, you may go right and end up in the gate at (1,2). With probability 2*0.2 / 3, he just remains at (1,1) since the top and left direction would lead him out of the maze.

If the hero(you) chooses to enter the gate at (2,1), he may end up at (1,2) or (2,3) with equal probability 1/2.you have to concentrate.

you have to Find the optimum strategy to control you r hero such that the expected number of turns to collect the first treasure is minimized.
you have to solve this now! you can do it...
