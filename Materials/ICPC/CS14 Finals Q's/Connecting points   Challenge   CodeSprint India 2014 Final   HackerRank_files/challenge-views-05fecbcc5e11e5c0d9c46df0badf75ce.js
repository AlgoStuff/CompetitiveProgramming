(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var ChallengeView,HR,_ref;return ChallengeView=function(_super){function ChallengeView(){return ChallengeView.__super__.constructor.apply(this,arguments)}return __extends(ChallengeView,_super),ChallengeView.prototype.template="challenge",ChallengeView.prototype.className="challenge-view container",ChallengeView.prototype.events={"click a.hr-problem-link":"clickProblem","click a.hr-submissions-link":"clickSubmissions","click a.hr-leaderboard-link":"clickLeaderboard","click a.hr-forum-link":"clickForum","click a.hr-editorial-link":"clickEditorial","change #showPractice":"toggleLeaderboard","click .pagination a":"changePagination"},ChallengeView.prototype.initialize=function(options){return this.activeTab=options.activeTab,this.paramPage=options.paramPage,this.customView=options.customView,this.submissionId=options.submissionId,this.submissionOptions=options.submissionOptions,this.includePractice=!0,this.leaderboardFilter=options.leaderboardFilter,this.contest=new HR.model("contest"),this.contest.set("slug",this.model.get("contest_slug")),this.contest.cached(),this.listenTo(this.model,"reset",this.render),this.listenTo(this.contest,"reset",this.render)},ChallengeView.prototype.setTab=function(tab){return this.$("ul.nav-tabs li").removeClass("active"),this.$(tab).addClass("active")},ChallengeView.prototype.setProblem=function(){var contest_slug;return HR.appController.setTitle(this.title_leading+this.default_title_middle+this.title_ending),contest_slug=this.model.get("contest_slug"),this.setTab("#problemTab"),this.body=new HR.ChallengeTemplateView({model:this.model,contest:this.contest}),this.assign({".challenge-body":this.body}),null===contest_slug&&(contest_slug="master"),HR.appController.set_contest_namespace(contest_slug),window.mixpanel_data={landing:!1,contest:contest_slug,page_type:"challengepage",challenge:this.model.get("slug")}},ChallengeView.prototype.clickProblem=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()?(HR.router.navigate(this.model.pageURL(),!1),this.setProblem()):void 0},ChallengeView.prototype.setBreadcrumb=function(){return this.contest&&this.contest.sync_status&&this.model.sync_status?("master"===this.contest.get("slug")?HR.appView.setBreadcrumb("global","All Domains","/domains"):(HR.appView.setBreadcrumb("global","All Contests","/contests"),HR.appView.setBreadcrumb("contest",this.contest.get("name"),"/contests/"+this.contest.get("slug"))),this.model.get("track")&&(HR.appView.setBreadcrumb("contest-track",this.model.get("track").track_name,"/domains/"+this.model.get("track").track_slug),HR.appView.setBreadcrumb("contest-chapter",this.model.get("track").name,"/domains/"+this.model.get("track").track_slug+"/"+this.model.get("track").slug)),HR.appView.setBreadcrumb("challenge",this.model.get("name"),"")):void 0},ChallengeView.prototype.setSubmissions=function(page){var challenge_slug,contest_slug,that;return null==page&&(page=1),HR.appController.setTitle(this.title_leading+" Submissions"+this.title_ending),this.activeTab="submissions",challenge_slug=this.model.get("slug"),contest_slug=this.model.get("contest_slug"),this.submissions||(this.submissions=HR.collection("submissions")),this.submissions.setPage(page),this.submissions.setContest(contest_slug),this.submissions.setChallenge(challenge_slug),this.submissions.cached(),that=this,HR.requires(["compound/submission-views"],function(){return that.body=new HR.SubmissionsView({collection:that.submissions}),that.assign({".challenge-body":that.body}),that.setTab("#submissionsTab"),null===contest_slug&&(contest_slug="master"),HR.appController.set_contest_namespace(contest_slug),window.mixpanel_data={landing:!1,contest:contest_slug,page_type:"submissions",challenge:challenge_slug}})},ChallengeView.prototype.clickSubmissions=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()+"/submissions"?(HR.router.navigate(this.model.pageURL()+"/submissions",!1),this.setSubmissions()):void 0},ChallengeView.prototype.setSubmission=function(submissionId){var challenge_slug,contest_slug,page,that;return HR.appController.setTitle(this.title_leading+(" Submissions "+submissionId)+this.title_ending),this.activeTab="submissions",challenge_slug=this.model.get("slug"),contest_slug=this.model.get("contest_slug"),this.contest||(this.contest=HR.model("contest")),this.contest.set("slug",this.model.get("contest_slug")),this.contest.cached(),this.submissionOptions.element&&"page"!==this.submissionOptions.element?void 0:(page="page"===this.submissionOptions.element?this.submissionOptions.element_id:1,null===this.submissionOptions._filter&&(this.submissionOptions._filter="all"),this.submission_model||(this.submission_model=HR.model("submission",{id:submissionId,filter:this.submissionOptions._filter,contest_slug:this.model.get("contest_slug")})),this.submission_model.cached(),that=this,HR.requires(["compound/submission-views"],function(){var gameset_collection;return that.submissionView||(that.submissionView=new HR.SubmissionView({contest:that.contest,model:that.submission_model,challenge:that.model}),"game"===that.submissionOptions.kind&&(gameset_collection=HR.collection("game-set"),gameset_collection.setPage(page),gameset_collection.setFilter(that.submissionOptions._filter),gameset_collection.setSid(submissionId),gameset_collection.cached(),that.submissionView.setGameSetCollection(gameset_collection))),that.body=that.submissionView,that.assign({".challenge-body":that.body}),that.setTab("#submissionsTab")}),window.mixpanel_data.challenge=this.submission_model.slug)},ChallengeView.prototype.setForum=function(page){var challenge_slug,contest_slug,question_collection,that;return null==page&&(page=1),HR.appController.setTitle(this.title_leading+" Forum"+this.title_ending),this.activeTab="forum",that=this,challenge_slug=this.model.get("slug"),contest_slug=this.model.get("contest_slug"),question_collection=new HR.QuestionCollection,question_collection.page=page,question_collection.setChallengeSlug(challenge_slug),this.listenTo(question_collection,"question:link:clicked",this.clickForumQuestion),HR.requires(["compound/forum-views"],function(){return that.body=new HR.ChallengeQuestionsView({challenge:that.model,collection:question_collection}),that.assign({".challenge-body":that.body},that.setTab("#forumTab")),HR.appController.set_contest_namespace(contest_slug),window.mixpanel_data={landing:!1,contest:contest_slug,challenge:challenge_slug}})},ChallengeView.prototype.clickForum=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()+"/forum/questions"?(HR.router.navigate(this.model.pageURL()+"/forum/questions",!1),this.setForum()):void 0},ChallengeView.prototype.setEditorial=function(){var challenge_slug,contest_slug,editorial,hacker,options,that;return HR.appController.setTitle(this.title_leading+" Editorial"+this.title_ending),this.activeTab="editorial",that=this,challenge_slug=this.model.get("slug"),contest_slug=this.model.get("contest_slug"),hacker=HR.profile(),options={challenge_slug:challenge_slug},editorial=HR.model("editorial",options).cached(),HR.requires(["compound/extra-views"],function(){return that.body=new HR.EditorialView({model:editorial,current_hacker:hacker}),that.assign({".challenge-body":that.body}),that.setTab("#editorialTab"),HR.appController.set_contest_namespace(contest_slug),window.mixpanel_data={landing:!1,contest:contest_slug,challenge:challenge_slug}})},ChallengeView.prototype.clickEditorial=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()+"/editorial"?(HR.router.navigate(this.model.pageURL()+"/editorial",!1),this.setEditorial()):void 0},ChallengeView.prototype.clickForumQuestion=function(question_model){return HR.router.navigate(this.model.pageURL()+"/forum/questions/"+question_model.id,!1),this.setForumQuestion(question_model)},ChallengeView.prototype.setForumQuestion=function(question_model){var full_question_model;return full_question_model=new HR.QuestionModel({challenge_slug:this.model.get("slug"),contest_slug:this.model.get("contest_slug"),id:question_model.id}),this.body=new HR.QuestionView({challenge:this.model,model:full_question_model}),this.assign({".challenge-body":this.body}),this.setTab("#forumTab")},ChallengeView.prototype.setLeaderboard=function(page){var contest_slug,leaderboard_view;return null==page&&(page=1),HR.appController.setTitle(this.title_leading+" Leaderboard"+this.title_ending),contest_slug=this.model.get("contest_slug"),this.activeTab="leaderboard",this.leaderboard_collection||(this.leaderboard_collection=HR.collection("leaderboard"),this.leaderboard_collection.setPage(page),this.leaderboard_collection.setContestSlug(contest_slug),this.leaderboard_collection.setChallenge(this.model.get("slug")),this.leaderboard_collection.setChallengeLeaderboard(),this.leaderboard_collection.setIncludePractice(this.includePractice),this.leaderboardFilter&&this.leaderboard_collection.setFiltersFromString(this.leaderboardFilter),this.leaderboard_collection.cached()),leaderboard_view=new HR.LeaderboardView({collection:this.leaderboard_collection,profile:HR.profile(),contest:this.contest,challenge:this.model}),this.setTab("#leaderboardTab"),this.body=leaderboard_view,this.assign({".challenge-body":this.body}),null===contest_slug&&(contest_slug="master"),HR.appController.set_contest_namespace(this.model.get("contest_slug")),window.mixpanel_data={landing:!1,contest:contest_slug}},ChallengeView.prototype.clickLeaderboard=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()+"/leaderboard"?(HR.router.navigate(this.model.pageURL()+"/leaderboard",!1),this.setLeaderboard()):void 0},ChallengeView.prototype.toggleLeaderboard=function(e){return this.leaderboard_collection.setIncludePractice(e.currentTarget.checked),this.leaderboard_collection.cached({fetch:!0})},ChallengeView.prototype.changePagination=function(e){var href,page;return"leaderboard"===this.activeTab?(page=$(e.currentTarget).attr("data-page"),href=$(e.currentTarget).attr("href"),HR.router.navigate(href,!1),this.leaderboard_collection.setPage(page),this.leaderboard_collection.cached({fetch:!0}),!1):void 0},ChallengeView.prototype.render=function(){return this.model.sync_status&&this.contest.sync_status?this.model.get("body")?(this._template=HR.appController.template(this.template,this),this._template?($(this.el).html(this._template({model:this.model})),this.header||(this.header=new HR.ChallengeHeaderView({model:this.model,contest:this.contest,activeTab:this.activeTab})),this.assign({".challenge-header":this.header}),this.model.get("track")?$("challenge-nav-track-container").html("<a href='/domains/"+this.model.get("category")+"/"+this.model.get("track").slug+"' class='backbone'>"+this.model.get("track").name+"</a>"):$("challenge-nav-track-container").html(""),this.contest.get("hide_navigation")?($(".hide-in-private-contest").hide(),$(".page_navigation-sidebar").addClass("page_navigation-sidebar-disabled"),$(".page_navigation-sidebar-disabled").removeClass("page_navigation-sidebar")):($(".hide-in-private-contest").show(),$(".page_navigation-sidebar-disabled").addClass("page_navigation-sidebar"),$(".page_navigation-sidebar").removeClass("page_navigation-sidebar-disabled")),this.renderBody(),this):this):(this.model.cachedFetch({fetch:!0}),this):($(this.el).html(HR.appController.viewLoader(64)),this)},ChallengeView.prototype.renderBody=function(){return this.bootstrapTitle(),this.setBreadcrumb(),this.customView?(this.body=this.customView,this.assign({".challenge-body":this.body})):"leaderboard"===this.activeTab?this.setLeaderboard(this.paramPage||1):"submissions"===this.activeTab?this.submissionId?this.setSubmission(this.submissionId):this.setSubmissions(this.paramPage||1):"forum"===this.activeTab?this.setForum(this.paramPage||1):this.setProblem()},ChallengeView.prototype.bootstrapTitle=function(){var cat,chap,chap_slug,chapter;return chapter=this.model.get("track"),chap=null,cat=null,chapter&&"master"===this.contest.get("slug")&&(chap_slug=chapter.slug,cat=_.first(_.filter(HR.contest().get("categories"),function(_cat){return chap=_.first(_.filter(_cat.children,function(_chap){return _chap.slug===chap_slug})),null!==chap&&void 0!==chap})),chap=_.first(_.filter(cat.children,function(_chap){return _chap.slug===chap_slug}))),chap&&chap.name&&cat&&cat.name?(this.title_leading=this.model.get("name")+" :",this.default_title_middle=" Challenge",this.title_ending=" | "+chap.name+" | "+cat.name):(this.title_leading=this.model.get("name")+" :",this.default_title_middle=" Challenge",this.title_ending=" | "+HR.contest().get("name"))},ChallengeView.prototype.destroy=function(){return $(".hide-in-private-contest").show(),$(".page_navigation-sidebar-disabled").addClass("page_navigation-sidebar"),$(".page_navigation-sidebar").removeClass("page_navigation-sidebar-disabled"),ChallengeView.__super__.destroy.apply(this,arguments)},ChallengeView}(window.HR.GenericView),HR=null!=(_ref=window.HR)?_ref:{},HR.ChallengeView=ChallengeView})}).call(this);

(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var ChallengeHeaderView,HR;return ChallengeHeaderView=function(_super){function ChallengeHeaderView(){return ChallengeHeaderView.__super__.constructor.apply(this,arguments)}return __extends(ChallengeHeaderView,_super),ChallengeHeaderView.prototype.template="challenge-header",ChallengeHeaderView.prototype.className="challenge-header-view",ChallengeHeaderView.prototype.initialize=function(options){return this.activeTab=options.activeTab,this.contest=options.contest,this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this)},ChallengeHeaderView.prototype.render=function(){var breadCrumbs,bread_crumbs_view;return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),contest:this.contest,baseURL:this.model.pageURL(),activeTab:this.activeTab})),this.$(".apply-blob")&&(this.apply_blob_view?this.apply_blob_view.setElement(this.$(".apply-blob")):(this.apply_blob_view=new HR.ViewShiv({view:"apply-blob",model:this.model,el:this.$(".apply-blob")}),this.add_subview(this.apply_blob_view)),this.apply_blob_view.render()),breadCrumbs=this.model.breadCrumbs(),breadCrumbs.remove(breadCrumbs.last()),bread_crumbs_view=HR.util.renderBreadCrumbs(this.$("div.breadcrumbs"),breadCrumbs),this.add_subview(bread_crumbs_view),this},ChallengeHeaderView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeHeaderView=ChallengeHeaderView})}).call(this);

(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var ChallengeTemplateView,HR;return ChallengeTemplateView=function(_super){function ChallengeTemplateView(){return ChallengeTemplateView.__super__.constructor.apply(this,arguments)}return __extends(ChallengeTemplateView,_super),ChallengeTemplateView.prototype.template="challenge-template",ChallengeTemplateView.prototype.className="challenge-template-view",ChallengeTemplateView.prototype.initialize=function(options){return null==options&&(options={}),this.contest=options.contest},ChallengeTemplateView.prototype.render=function(){var body,events,form_properties,options;return 0===this.$(".challenge-content").length&&$(this.el).html('<div class="challenge-content"></div><div class="challenge-request"></div><div class="challenge-response"></div>'),this.content_view||(this.content_view=new HR.ChallengeContentView({parent:this,model:this.model,contest:this.contest}),this.add_subview(this.content_view)),this.request_view||(this.request_view=new HR.ChallengeRequestView({parent:this,model:this.model}),this.add_subview(this.request_view)),this.response_view||(this.response_view=new HR.ChallengeResponseView({parent:this,model:this.model}),this.add_subview(this.response_view)),this.assign({".challenge-content":this.content_view,".challenge-request":this.request_view,".challenge-response":this.response_view}),HR.tour_going&&!this.dialog&&(HR.tour_going=!1,form_properties={},options={title:"Let's get started!"},body="<div class='plL plR onboarding_modal'> <p class='text-center mlT mlB'> This is the code editor. You can compile your code, view the  leaderboard, submissions, and discussions for the challenge, and submit for scoring when you are ready. Happy Hacking! <!--We have left some helpful hints in case you get stuck.--> </p> </div> <footer class='text-center'><a class='mlB btn btn-green btn-large js-close'>Start solving</a></footer>",events={"click .js-close":function(e){var dialog;return dialog=e.data.that,dialog.destroy()}},options.body=body,options.events=events,options.width=640,this.dialog=new HR.util.ShowDialog(options,form_properties),this.dialog.render()),this},ChallengeTemplateView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeTemplateView=ChallengeTemplateView})}).call(this);

(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var ChallengeContentView,HR;return ChallengeContentView=function(_super){function ChallengeContentView(){return ChallengeContentView.__super__.constructor.apply(this,arguments)}return __extends(ChallengeContentView,_super),ChallengeContentView.prototype.template="challenge-content",ChallengeContentView.prototype.className="challenge-content-view",ChallengeContentView.prototype.events=function(){return{"click .js-suggest-edits":"showSuggestionDiv","click .js-suggestion-save":"makeSuggestion","click .js-suggestion-cancel":"hideSuggestionDiv","change select.translations":"changeLanguage","click a.language-preference":"setLanguagepreference"}},ChallengeContentView.prototype.initialize=function(options){return null==options&&(options={}),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.contest=options.contest,this.current_hacker=HR.profile()},ChallengeContentView.prototype.changeLanguage=function(e){var changed_language,filter,render_name_html;return $("#preference-msg").css("display","none"),changed_language=$(e.currentTarget).val(),filter=_.select(this.model.get("available_translations"),function(translation){return translation.language===changed_language}),this.current_hacker.get("local_language")||$("#preference-msg").css("display","inline-block"),render_name_html=function(_this){return function(){return 1===filter.length?($(".challenge-text").html(filter[0].body_html||_this.model.get("body_html")),$(".hr_tour-challenge-name").html(filter[0].name||_this.model.get("name")),_this.updatePdfLink(filter[0].language)):($(".challenge-text").html(_this.model.get("body_html")),$(".hr_tour-challenge-name").html(_this.model.get("name")),_this.updatePdfLink("English"))}}(this),HR.requires(["MathJax/MathJax"],render_name_html),render_name_html()},ChallengeContentView.prototype.updatePdfLink=function(language){var element,pdf_url,rest;return $("#pdf-link").size()>0?(element=$("#pdf-link")[0],pdf_url="/rest"+HR.appController.namespace(HR.appController.get_current_contest_slug(),rest=!0)+"challenges/"+this.model.get("slug")+"/download_pdf?language="+language,$("#pdf-link")[0].href=pdf_url):void 0},ChallengeContentView.prototype.setLanguagepreference=function(e){var changed_language;return changed_language=$(".translations :selected").text().trim(),e.preventDefault(),$("#preference-msg").html("Saving language preference..."),this.current_hacker.set("local_language",changed_language),this.current_hacker.save(null,{success:function(){return $("#preference-msg").html("Language preference updated."),setTimeout(function(){return $("#preference-msg").css("display","none")},3e3)},error:function(){return $("#preference-msg").html("There was some error while saving your preferences.")}})},ChallengeContentView.prototype.render=function(){var render_template;return render_template=function(_this){return function(){return $(_this.el).html(HR.appController.template(_this.template,_this)({model:_this.model.toJSON(),contest:_this.contest.toJSON(),baseURL:_this.model.pageURL()})),_this.setLanguageSelected(),_this.renderSidebar()}}(this),HR.requires(["MathJax/MathJax"],render_template),render_template(),this},ChallengeContentView.prototype.hideSuggestionDiv=function(e){return e.preventDefault(),$("#suggestion-form").slideToggle(),$(".js-suggest-edits").addClass("in"),$(".alert.error").hide()},ChallengeContentView.prototype.renderSidebar=function(){return this.sidebar||(this.sidebar=new HR.ChallengeSidebarView({model:this.model})),this.assign({".challenge-sidebar-container":this.sidebar})},ChallengeContentView.prototype.showSuggestionDiv=function(e){return e.preventDefault(),$("#suggestion-form").slideToggle(),$(".js-suggest-edits").removeClass("in")},ChallengeContentView.prototype.makeSuggestion=function(e){var form_data,suggestion;return e.preventDefault(),suggestion=$("#suggestion").val().trim(),suggestion.length<20?($(".alert.error").show().html("Your suggestion should contain at least 20 characters."),void 0):($(e.currentTarget).html("Processing Request...").attr("disabled","disabled"),form_data={suggestion:$("#suggestion").val(),challenge_id:this.model.get("id"),challenge_url:"www.hackerrank.com/"+Backbone.history.fragment,contest_slug:HR.appController.get_current_contest_slug()},$.ajax({url:"/rest/challenge_edit_suggestion",type:"POST",data:form_data,success:function(data){var error,i,len,_i;if($(e.currentTarget).removeAttr("disabled").html("Submit"),data.status)return $(".alert.error").hide(),$("#suggestion-form").slideToggle(),$(".js-suggest-edits").addClass("in");if(0===data.errors.length)error="Unknown Error";else if(1===data.errors.length)error=data.errors[0];else{for(error="<ul style='text-align: left;'>",len=data.errors.length-1,i=_i=0;len>=0?len>=_i:_i>=len;i=len>=0?++_i:--_i)error+="<li>"+data.errors[i]+"</li>";error+="</ul>"}return $(".alert.error").show().html(error)},error:function(XMLHttpRequest,textStatus,code){return 403===code?$(".alert.error").show().html("Please log in to suggest an edit."):$(".alert.error").show().html("Unknown Error")}}))},ChallengeContentView.prototype.setLanguageSelected=function(){var current_language;return current_language=this.model.get("preferred_language")?this.model.get("preferred_language"):"English",$("option[value="+current_language+"]").attr("selected","selected"),this.updatePdfLink(current_language)},ChallengeContentView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeContentView=ChallengeContentView})}).call(this);

(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var ChallengeSidebarView,HR;return ChallengeSidebarView=function(_super){function ChallengeSidebarView(){return ChallengeSidebarView.__super__.constructor.apply(this,arguments)}return __extends(ChallengeSidebarView,_super),ChallengeSidebarView.prototype.template="challenge-sidebar",ChallengeSidebarView.prototype.className="challenge-sidebar-view",ChallengeSidebarView.prototype.events=function(){return{"click .share_facebook":"fbshare","click .share_twitter":"tweet","click .share_gplus":"gplus","click .recent-hacker-prev":"recentHackersPrevious","click .recent-hacker-next":"recentHackersNext"}},ChallengeSidebarView.prototype.initialize=function(options){return null==options&&(options={}),this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this),this.page=1,this.count=25,this.hard_limit=100,this.recent_hacker_sync=!1,this.current_hacker=HR.profile()},ChallengeSidebarView.prototype.recentHackersPrevious=function(){return this.recent_hacker_sync?this.page<=1?void 0:(this.page=this.page-1,this.recent_hackers_page=this.recent_hackers.slice((this.page-1)*this.count,this.page*this.count),this.render()):void 0},ChallengeSidebarView.prototype.recentHackersNext=function(){return this.recent_hacker_sync?this.page*this.count>=parseInt(this.model.get("submitted_hackers_count"))||this.page*this.count>=this.hard_limit?void 0:(this.page=this.page+1,this.recent_hackers_page=this.recent_hackers.slice((this.page-1)*this.count,this.page*this.count),this.render()):void 0},ChallengeSidebarView.prototype.get_recent_hackers=function(){var that;return that=this,this.recent_hacker_sync=!1,this.render(),$.ajax({url:""+this.model.restURL()+"/recent_hackers",success:function(data){return that.recent_hackers=data,that.recent_hackers_page=that.recent_hackers.slice(0,that.count),that.recent_hacker_sync=!0,that.render()}})},ChallengeSidebarView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON()})),this},ChallengeSidebarView.prototype.fbshare=function(e){var h,left,permalink,top,url,w;return permalink=this.getPermaLink(),e.preventDefault(),w=600,h=350,left=screen.width/2-w/2,top=screen.height/2-h/2,url="https://www.facebook.com/sharer/sharer.php?s=100&p[url]="+encodeURIComponent(document.location.href)+"&p[title]="+encodeURIComponent(this.model.get("name"))+"&p[summary]="+encodeURIComponent(this.model.get("preview")),window.open(url,"_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+w+", height="+h+", top="+top+", left="+left),window.focus()},ChallengeSidebarView.prototype.tweet=function(e){var h,left,permalink,text,top,url,w;return permalink=this.getPermaLink(),e.preventDefault(),w=600,h=350,left=screen.width/2-w/2,top=screen.height/2-h/2,text="Great challenge on @HackerRank. Try it here: "+permalink,url="https://twitter.com/intent/tweet?text="+encodeURIComponent(text),window.open(url,"_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+w+", height="+h+", top="+top+", left="+left),window.focus()},ChallengeSidebarView.prototype.gplus=function(e){var h,left,permalink,top,url,w;return permalink=this.getPermaLink(),e.preventDefault(),w=600,h=350,left=screen.width/2-w/2,top=screen.height/2-h/2,url="https://plus.google.com/share?url="+permalink,window.open(url,"_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+w+", height="+h+", top="+top+", left="+left),window.focus()},ChallengeSidebarView.prototype.getPermaLink=function(){return""+document.location.protocol+"//"+document.location.host+HR.appController.current_contest_namespace+"/challenges/"+this.model.get("slug")},ChallengeSidebarView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeSidebarView=ChallengeSidebarView})}).call(this);

(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var ChallengeRequestView,HR;return ChallengeRequestView=function(_super){function ChallengeRequestView(){return ChallengeRequestView.__super__.constructor.apply(this,arguments)}return __extends(ChallengeRequestView,_super),ChallengeRequestView.prototype.template="challenge-request",ChallengeRequestView.prototype.className="challenge-request-view",ChallengeRequestView.prototype.initialize=function(options){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.parent=options.parent},ChallengeRequestView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)()),-1!==$.inArray(this.model.get("kind"),["code","game","client-server"])?(this.codeeditor||(this.codeeditor=new HR.CodeEditorView({model:this.model,parent:this}),this.add_subview(this.codeeditor)),this.assign({"div.codeeditor-wrapper":this.codeeditor})):-1!==$.inArray(this.model.get("kind"),["dataset"])&&(this.datasets_upload_view||(this.datasets_upload_view=new HR.DataSetsUploadView({model:this.model,parent:this}),this.add_subview(this.datasets_upload_view)),this.assign({"div.codeeditor-wrapper":this.datasets_upload_view})),this},ChallengeRequestView.prototype.unSetFullScreenView=function(){return this.fullscreen_view=void 0},ChallengeRequestView.prototype.setFullScreenView=function(fullscreen_view){return this.fullscreen_view=fullscreen_view},ChallengeRequestView.prototype.unrenderFullScreenView=function(){return this.fullscreen_view?this.fullscreen_view.unRender():void 0},ChallengeRequestView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeRequestView=ChallengeRequestView})}).call(this);

(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var ChallengeResponseView,HR;return ChallengeResponseView=function(_super){function ChallengeResponseView(){return ChallengeResponseView.__super__.constructor.apply(this,arguments)}return __extends(ChallengeResponseView,_super),ChallengeResponseView.prototype.template="challenge-response",ChallengeResponseView.prototype.className="challenge-response-view",ChallengeResponseView.prototype.initialize=function(){return this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this)},ChallengeResponseView.prototype.render=function(){return $(this.el).html("<h5 class='output-progress padded light-wrap hide mlT psT'></h5>\n<div class='output-area-wrap hide'>\n  <div class='output-area mlT psT' id='output-area'></div>\n</div>"),this.renderSubView(),this},ChallengeResponseView.prototype.renderSubView=function(){return this.compile_test?("game"===this.model.get("kind")?this.subview||(this.subview=new HR.GameCompileTestView({model:this.compile_test,parent:this})):"code"===this.model.get("kind")?this.subview||(this.subview=new HR.CodeCompileTestView({model:this.compile_test,parent:this})):"client-server"===this.model.get("kind")&&(this.subview||(this.subview=new HR.ClientServerCompileTestView({model:this.compile_test,parent:this}))),this.assign({"#output-area":this.subview}),this.showHideViews()):this.clear()},ChallengeResponseView.prototype.setCompileTest=function(compile_test){return this.compile_test&&(this.stopListening(this.compile_test),this.clear()),this.compile_test=compile_test,this.listenTo(this.compile_test,"reset",this.showHideViews),this.listenTo(this.compile_test,"change:id",this.showHideViews),this.listenTo(this.compile_test,"change:status",this.showHideViews),this.render()},ChallengeResponseView.prototype.showHideViews=function(){return 2===this.compile_test.get("status")&&this.compile_test.get("errors")?this.showError():this.compile_test.get("status")>0||_.isArray(this.compile_test.get("games"))&&this.compile_test.get("games").length>0?(this.$(".output-progress").addClass("hide"),this.$(".output-area-wrap").removeClass("hide")):(this.$(".output-progress").removeClass("hide"),_.isNumber(this.compile_test.get("id"))?this.compile_test.get("status_string")?this.$(".output-progress").html(this.compile_test.get("status_string")):this.$(".output-progress").html("Processing"):this.$(".output-progress").html("Uploading"))},ChallengeResponseView.prototype.showError=function(){return this.$(".output-progress").html("<p class='error'>"+this.compile_test.get("errors").join("<br/>")+"</p>")},ChallengeResponseView.prototype.clear=function(){return this.subview&&(this.subview.destroy(),this.subview=void 0),this.$(".output-area").addClass("hide")},ChallengeResponseView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeResponseView=ChallengeResponseView})}).call(this);

(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var FullScreenView,HR;return FullScreenView=function(_super){function FullScreenView(){return FullScreenView.__super__.constructor.apply(this,arguments)}return __extends(FullScreenView,_super),FullScreenView.prototype.el="body",FullScreenView.prototype.template="fullscreen",FullScreenView.prototype.initialize=function(options){return this.profile=HR.profile(),this.parent=options.parent,this.template_view=this.parent.parent.parent},FullScreenView.prototype.render=function(){var set_height,that;return that=this,0===$(this.el).find("#fullscreen-wrapper").length&&$(this.el).append("<div id='fullscreen-wrapper'></div>"),$(this.el).css("overflow-y","hidden"),$(this.el).find("#fullscreen-wrapper").show(),$(this.el).find("#fullscreen-wrapper").height($(window).height()).html(_.template('<div class="left-sidebar"> <div class="challenge-content"></div> </div> <div class="separator"></div> <div class="right-sidebar"> <div class="challenge-request"></div> <div class="challenge-response"></div> </div> <div class="clearfix"></div>')({model:this.model.toJSON()})),this.$left_sidebar=$(this.el).find("#fullscreen-wrapper .left-sidebar"),this.$right_sidebar=$(this.el).find("#fullscreen-wrapper .right-sidebar"),this.$separator=$(this.el).find("#fullscreen-wrapper .separator"),set_height=function(_this){return function(){return _this.$left_sidebar.height($(window).height()),_this.$right_sidebar.height($(window).height()),_this.$separator.height($(window).height())}}(this),set_height(),$(window).resize(set_height),this.template_view.request_view.setFullScreenView(this),this.assign({".left-sidebar .challenge-content":this.template_view.content_view,".right-sidebar .challenge-request":this.template_view.request_view,".right-sidebar .challenge-response":this.template_view.response_view}),$("div.separator").dragResize({activeColor:"#AAA",inactiveColor:"#DDD",resize:function(pageX){var document_width,left_sidebar_width,left_sidebar_width_px,right_sidebar_width,right_sidebar_width_px,separator_width;return separator_width=7,document_width=$(window).width(),left_sidebar_width_px=pageX-3,right_sidebar_width_px=document_width-(left_sidebar_width_px+10),left_sidebar_width=100*(left_sidebar_width_px/document_width)+"%",right_sidebar_width=100*(right_sidebar_width_px/document_width)+"%",that.$left_sidebar.css("width",left_sidebar_width),that.$right_sidebar.css("width",right_sidebar_width)}}),this},FullScreenView.prototype.unRender=function(){return $(this.el).css("overflow-y","visible"),$(this.el).find("#fullscreen-wrapper").length>0&&$(this.el).find("#fullscreen-wrapper").unbind().remove(),this.template_view.request_view.unSetFullScreenView(this),this.template_view.render()},FullScreenView}(window.HR.GenericView),HR=window.HR||{},HR.FullScreenView=FullScreenView})}).call(this);

(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var CodeEditorView,HR,_ref;return CodeEditorView=function(_super){function CodeEditorView(){return CodeEditorView.__super__.constructor.apply(this,arguments)}return __extends(CodeEditorView,_super),CodeEditorView.prototype.template="codeeditor",CodeEditorView.prototype.className="codeeditor-view",CodeEditorView.prototype.initialize=function(options){return this.model=options.model,this.parent=options.parent,this.profile=HR.profile(),this.forkable=!1,this.clipboardnotset=!0},CodeEditorView.prototype.events={"click #codeshell-wrapper a.fullscreen":"makeFullscreen","click #codeshell-wrapper a.restorefullscreen":"restoreFullscreen","click #codeshell-wrapper button.upload_file":"confirmUploadFileDialog","codeshellcompile #codeshell-wrapper":"compileTest","codeshellsubmit #codeshell-wrapper":"submitPopup"},CodeEditorView.prototype.render=function(){return 0===$(this.el).find("#codeshell-wrapper").length&&($(this.el).html("<div id='codeshell-wrapper'></div>"),HR.appController.loadCodeMirror(function(_this){return function(){return _this.applyCodeshell(),_this.isFullscreened?_this.$(".fullscreen").click():void 0}}(this))),this},CodeEditorView.prototype.applyCodeshell=function(){var that;return that=this,this.$("#codeshell-wrapper").codeshell($.extend({showCustomInput:this.model.get("compile_and_test")&&this.model.get("custom_case"),showCompileTest:this.model.get("compile_and_test"),showSubmit:!0,showUploadCode:!0,showFullScreen:!0,showTheme:!0,foldCode:!0,compile_button_text:"Run Code",enableIntellisense:!0,enableVersioning:this.profile.isLoggedIn(),versionIds:this.model.get("version_ids")||[],versioningRestUrl:""+this.model.restURL()+"/versions",dynamicMode:!0,languages:this.model.get("languages"),autoSaveNamespace:"hr-cedit-contest:"+HR.contest().get("id")+"-challenge:"+this.model.get("id"),loadmode:function(_this){return function(e,data){return HR.appController.loadCodeMirrorMode(data.lang,function(){return data.callback(),_this.setClipboard()})}}(this)},this.model.getLanguageTemplates())),this.$("#codeshell-wrapper").codeshell("onChange",this.deleteMarkersOnSource)},CodeEditorView.prototype.makeFullscreen=function(){return this.isFullscreened||(this.$("#codeshell-wrapper").codeshell("saveLangCode"),this.fullscreen||(this.fullscreen=new HR.FullScreenView({model:this.model,parent:this})),this.fullscreen.render(),this.isFullscreened=!0),this.$(".fullscreen").addClass("force-hide").removeClass("active-link"),this.$(".restorefullscreen").removeClass("force-hide").addClass("active-link")},CodeEditorView.prototype.restoreFullscreen=function(){return this.$("#codeshell-wrapper").codeshell("saveLangCode"),this.fullscreen.unRender(),this.isFullscreened=!1,this.$(".fullscreen").removeClass("force-hide"),this.$(".restorefullscreen").addClass("force-hide"),setTimeout(function(){return $("body").scrollTop($("#codeshell-wrapper").offset().top-50)},100)},CodeEditorView.prototype.confirmUploadFileDialog=function(){var dialog,that;return this.showConfirmUpload()?this.uploadFileDialog():(that=this,dialog=new HR.util.ShowConfirmationDialog({title:"Attn: Upload file",body:"<p>Uploading a file will replace the current content in your code editor. Would you like to continue?</p> <p class='gray-text' style='font-size: 14px;'> <input id='confirm-upload-checkbox' type='checkbox' class='confirm-upload'> <label style='display: inline-block; font-weight: normal;' for='confirm-upload-checkbox'>skip this alert next time</label> </p>",buttons:[{name:"No","class":"hr_secondary-btn hr-dialog-button",callback:function(dialog){return that.toggleConfirmUpload(dialog.$body().find("input.confirm-upload").is(":checked")),this.setInactive(),dialog.destroy()}},{name:"Yes","class":"hr_primary-btn hr-dialog-button",callback:function(dialog){return that.toggleConfirmUpload(dialog.$body().find("input.confirm-upload").is(":checked")),this.setInactive(),dialog.destroy(),that.uploadFileDialog()}}]}),dialog.render())},CodeEditorView.prototype.toggleConfirmUpload=function(flag){return $.cookie("code_upload_as_file",flag===!1)},CodeEditorView.prototype.showConfirmUpload=function(){return"false"===$.cookie("code_upload_as_file")?!0:!1},CodeEditorView.prototype.uploadFileDialog=function(){var buttons,dialog,fields,language_options,that;return that=this,language_options={},language_options["auto-detect"]="Auto Detect",language_options["current-language"]="Current Language",_.each(this.model.get("languages"),function(k){return language_options[k]=window.lang_display_mapping[k]}),fields=[{name:"source_file",title:"Source File",type:"file"},{name:"language",title:"Language",type:"select",options:language_options},{name:"challenge_id",value:that.model.get("id"),type:"hidden"},{name:"contest_id",value:that.model.get("contest_id"),type:"hidden"},{name:"current_language",value:$("#codeshell-wrapper").codeshell("getOptions").language,type:"hidden"},{name:"is_file_upload",value:"1",type:"hidden"}],buttons=[{name:"Upload",callback:function(dialog){var $form,btn,formData;return btn=this,$form=dialog.$form(),formData=new FormData($form[0]),btn.unSetFailedMsg(),$.ajax({url:"/rest/upload_respawn",type:"POST",data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){return btn.setInactive(),data.ok?that.$("#codeshell-wrapper").codeshell("getOptions").lang_display_mapping[data.data.language]?HR.appController.loadCodeMirrorMode(data.data.language,function(){return function(){return that.$("#codeshell-wrapper").codeshell("forkNewBuffer",{language:data.data.language,code:data.data.source}),dialog.destroy()}}(this)):btn.failed("Language not supported for this challenge"):btn.failed(data.message)}})}}],dialog=new HR.util.ShowFormDialog({title:"Upload Dialog",width:650,enctype:"multipart/form-data",fields:fields,buttons:buttons}),dialog.render()},CodeEditorView.prototype.compileTest=function(e,data){var $btn,codeeditor_body_view,compile_test,response_view;if(0!==_.size(data)&&(response_view=this.parent.parent.response_view,codeeditor_body_view=this.parent.body,this.deleteMarkersOnSource(),$btn=$(e.currentTarget).find("button.bb-compile"),"disabled"!==$btn.attr("btn-disabled")&&!_.isEmpty($("#codeshell-wrapper").codeshell("getOptions").language)))return $btn.attr("btn-disabled","disabled"),$btn.addClass("disabled"),compile_test=new HR.CompileTestModel({code:data.code,language:data.language}),compile_test.setChallenge(this.model),data.custominput?(compile_test.set("customtestcase",!0),compile_test.set("custominput",data.custominput)):compile_test.set("customtestcase",!1),compile_test.save(),compile_test.bind("change:status",this.enableCompileTest,this),compile_test.bind("change:error_markers",this.addMarkersOnSource,this),response_view.setCompileTest(compile_test)},CodeEditorView.prototype.addMarkersOnSource=function(model,error_markers){var editor,error_message,i,line_number,line_offset,marker_node,markers,total_lines;if(error_markers){window.error_marker_widgets||(window.error_marker_widgets=[]),editor=this.$("#codeshell-wrapper").codeshell("getEditor"),line_offset=error_markers.head_code_lines,total_lines=editor.lineCount(),markers=error_markers.markers;for(i in markers)error_message=markers[i].message,line_number=markers[i].line_number-line_offset,total_lines>=line_number&&(marker_node=$("<div class='error-marker'><span class='error-marker-icon'>!</span>"+error_message+"</div>"),window.error_marker_widgets.push(editor.addLineWidget(line_number-1,marker_node[0],{above:!0})));return editor.refresh()}},CodeEditorView.prototype.deleteMarkersOnSource=function(){var editor,i;if(window.error_marker_widgets&&0!==window.error_marker_widgets.length){editor=this.$("#codeshell-wrapper").codeshell("getEditor");for(i in window.error_marker_widgets)editor.removeLineWidget(window.error_marker_widgets[i]);return editor.refresh(),window.error_marker_widgets=[]}},CodeEditorView.prototype.enableCompileTest=function(model,status){var error;return status>0&&(this.$("#codeshell-wrapper").codeshell("enableCompileBtn"),error=model.get("error"))?this.parent.parent.response_view.showError():void 0},CodeEditorView.prototype.submitPopup=function(e,data){var $btn,current_text,dialog,error,that,_timeoutFn;return that=this,$btn=$(e.currentTarget).find("button.bb-submit"),"disabled"!==$btn.attr("btn-disabled")?($btn.attr("btn-disabled","disabled"),$btn.addClass("disabled"),current_text=$btn.html(),$.inArray(this.model.get("id"),HR.CHALLENGES_DISABLED)>=0||HR.CONTEST_DISABLED?(error=new HR.util.ShowSubmitDisabledDialog,error.render(),void 0):this.profile.isLoggedIn()?($btn.html("Submitting"),dialog=new HR.util.ShowConfirmationDialog({title:"Confirm Submission",body:"Are you sure you want to submit this code?",onDestroy:function(){return $btn.removeAttr("btn-disabled"),$btn.removeClass("disabled"),$btn.html(current_text)},buttons:[{name:"No, do not submit","class":"hr_secondary-btn hr-dialog-button",callback:function(dialog){return that.model&&that.model.get&&HR.profile()&&mixpanel.push(["track","Submit Code",{challenge:that.model.get("slug"),contest:that.model.get("contest_slug"),kind:that.model.get("kind"),language:$("#codeshell-wrapper").codeshell("getOptions").language,fullscreen:that.isFullscreened,username:HR.profile().username}]),this.setInactive(),dialog.destroy()}},{name:"Yes, submit my code","class":"hr_primary-btn hr-dialog-button",callback:function(dialog){var btn,submission;return that.model&&that.model.get&&HR.profile()&&mixpanel.push(["track","Submit Code",{challenge:that.model.get("slug"),contest:that.model.get("contest_slug"),kind:that.model.get("kind"),language:$("#codeshell-wrapper").codeshell("getOptions").language,fullscreen:that.isFullscreened,username:HR.profile().username}]),btn=this,that.submitLock&&that.submitLock===!0?void 0:""!==$("#codeshell-wrapper").codeshell("getOptions").language?(this.setInactive(),that.submitLock=!0,$("#codeshell-wrapper").codeshell("deleteLangCode"),submission=HR.model("submission",{code:data.code,language:data.language,contest_slug:that.model.contest_slug||that.model.get("contest_slug")}),submission.setChallenge(that.model),submission.save(null,{success:function(model,response){var failed_error_message;return _gaq.push(["_trackPageview","/submitcode/"+(that.model.get("contest_slug")||that.model.contest_slug)+"/"+that.model.slug+"/"]),HR.QUEUED_SUBMISSIONS||(HR.QUEUED_SUBMISSIONS={}),HR.QUEUED_SUBMISSIONS[model.get("id")]=!0,that.submitLock=!1,response.status?(dialog.destroy(),that.parent.unrenderFullScreenView(),model.set("kind",that.model.get("kind"),{silent:!0}),HR.router.navigate(model.pageURL(),!0),$("html body").animate({scrollTop:0},300)):(response.errors?failed_error_message=response.errors[0]:response.message&&(failed_error_message=response.message),btn.setActive(),btn.setFailedMsg(failed_error_message))},error:function(){return that.submitLock=!1,btn.setActive(),btn.setFailedMsg("Internal server error occured. Please try again.")}})):(this.setInactive(),dialog.showError("Select a language!"))}}]}),dialog.render()):($btn.html("Logging in"),_timeoutFn=function(){return that.profile.isLoggedIn()?($btn.removeAttr("btn-disabled"),$btn.removeClass("disabled"),$btn.click()):setTimeout(_timeoutFn,100)},dialog=new HR.util.ShowLoginDialog({body_text:"Please login in order to submit",onDestroy:function(){return $btn.removeAttr("btn-disabled"),$btn.removeClass("disabled"),$btn.html(current_text)},success_callback:function(){return $btn.html(current_text),setTimeout(_timeoutFn,100)},show_sign_up_link:!0}),dialog.render(),void 0)):void 0},CodeEditorView.prototype.setClipboard=function(){var clipboardcopy,editor,that;return this.codeshellwrapper=this.$("#codeshell-wrapper"),editor=this.$("#codeshell-wrapper").codeshell("getEditor"),that=this,HR.clipboard&&this.codeshellwrapper&&HR.forkable&&editor?(clipboardcopy={},clipboardcopy.language=HR.clipboard.language,clipboardcopy.code=HR.clipboard.code,that.codeshellwrapper.codeshell("setValueorFork",clipboardcopy),$("body").scrollTop($("#codeshell-wrapper").offset().top-50),delete HR.clipboard):void 0},CodeEditorView}(window.HR.GenericView),HR=null!=(_ref=window.HR)?_ref:{},HR.CodeEditorView=CodeEditorView})}).call(this);

(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var DataSetsUploadView,HR;return DataSetsUploadView=function(_super){function DataSetsUploadView(){return DataSetsUploadView.__super__.constructor.apply(this,arguments)}return __extends(DataSetsUploadView,_super),DataSetsUploadView.prototype.template="data-sets-upload",DataSetsUploadView.prototype.className="data-sets-upload-view",DataSetsUploadView.prototype.initialize=function(options){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.parent=options.parent},DataSetsUploadView.prototype.render=function(){return this.model.sync_status?(this.hacker=HR.profile(),this.hacker.isLoggedIn()?(this.contest||(this.contest=HR.contest()),this.data_set_file_submissions||(this.data_set_file_submissions=new HR.DataSetFileSubmissionsCollection,this.data_set_file_submissions.set_challenge_slug(this.model.get("slug")),this.data_set_file_submissions.set_contest_slug(this.contest.get("slug")),this.data_set_file_submissions.fetch(),this.listenTo(this.data_set_file_submissions,"sync",this.render)),this.data_set_file_submissions.sync_status?($(this.el).html(HR.appController.template(this.template,this)()),this.data_sets||(this.data_sets=this.model.get_data_sets(),this.listenTo(this.data_sets,"change",this.render),this.listenTo(this.data_sets,"reset",this.render)),this.dataSets=$(),this.dataSetListViews&&this.dataSetListViews.length>0&&this.destroyDataSetListViews(),this.dataSetListViews=[],$("div#datasets-upload-wrapper").html(),_.each(this.data_sets.models,function(babe){var _view;return _view=new HR.DataSetUploadListView({model:babe,challenge:this.model,data_set_file_submissions:this.data_set_file_submissions,parent:this}),this.dataSets.push(_view.render().el),this.dataSetListViews.push(_view)},this),$(this.el).find("div#datasets-upload-wrapper").append(this.dataSets),this):($(this.el).html("<div class='row'> <div class='span1'>&nbsp</div> <div class='gray light-wrap span8 mlB'>Loading user data</div> </div>"),this)):(this.listenTo(this.hacker,"change",this.render),this.listenTo(this.hacker,"reset",this.render),$(this.el).html("<div class='row'> <div class='span1'>&nbsp</div> <div class='gray light-wrap span8 mlB'>Please login in order to upload your solutions</div> </div>"),this)):this},DataSetsUploadView.prototype.destroyDataSetListViews=function(){return this.dataSetListViews||(this.dataSetListViews=[]),_.each(this.dataSetListViews,function(_view){return _view.destroy()}),this.dataSetListViews=[]},DataSetsUploadView.prototype.destroy=function(){return this.destroyDataSetListViews(),DataSetsUploadView.__super__.destroy.call(this)},DataSetsUploadView}(window.HR.GenericView),HR=window.HR||{},HR.DataSetsUploadView=DataSetsUploadView})}).call(this);

(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var DataSetUploadListView,HR;return DataSetUploadListView=function(_super){function DataSetUploadListView(){return DataSetUploadListView.__super__.constructor.apply(this,arguments)}return __extends(DataSetUploadListView,_super),DataSetUploadListView.prototype.template="data-set-upload-list",DataSetUploadListView.prototype.className="data-set-upload-list-view",DataSetUploadListView.prototype.initialize=function(options){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.challenge=options.challenge,this.listenTo(this.challenge,"change",this.render),this.listenTo(this.challenge,"reset",this.render),this.parent=options.parent,this.data_set_file_submissions=options.data_set_file_submissions},DataSetUploadListView.prototype.render=function(){return this.challenge.sync_status?($(this.el).html(HR.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),challenge:this.challenge,_challenge:this.challenge.toJSON()})),this.data_set_files||(this.data_set_files=this.model.get_data_set_files(),this.listenTo(this.data_set_files,"change",this.render),this.listenTo(this.data_set_files,"reset",this.render)),this.dataSetFiles=$(),this.dataSetFileListViews&&this.dataSetFileListViews.length>0&&this.destroyDataSetFileListViews(),this.dataSetFileListViews=[],$("div#datasets-upload-wrapper").html(),_.each(this.data_set_files.models,function(babe){var _view;return _view=new HR.DataSetFileUploadListView({model:babe,dataset:this.model,challenge:this.challenge,data_set_file_submissions:this.data_set_file_submissions,parent:this}),this.dataSetFiles.push(_view.render().el),this.dataSetFileListViews.push(_view)},this),$(this.el).find("div#data-set-files-wrapper").append(this.dataSetFiles),this):this},DataSetUploadListView.prototype.destroyDataSetFileListViews=function(){return this.dataSetFileListViews||(this.dataSetFileListViews=[]),_.each(this.dataSetFileListViews,function(_view){return _view.destroy()}),this.dataSetFileListViews=[]},DataSetUploadListView.prototype.destroy=function(){return this.destroyDataSetFileListViews(),DataSetUploadListView.__super__.destroy.call(this)},DataSetUploadListView}(window.HR.GenericView),HR=window.HR||{},HR.DataSetUploadListView=DataSetUploadListView})}).call(this);

(function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};jQuery(function(){var DataSetFileUploadListView,HR;return DataSetFileUploadListView=function(_super){function DataSetFileUploadListView(){return this.poll=__bind(this.poll,this),DataSetFileUploadListView.__super__.constructor.apply(this,arguments)}return __extends(DataSetFileUploadListView,_super),DataSetFileUploadListView.prototype.template="data-set-file-upload-list",DataSetFileUploadListView.prototype.className="data-set-file-upload-list-view",DataSetFileUploadListView.prototype.events={"click .js_upload":"uploadSubmissionPrompt","change .js_payload":"uploadSubmission","click .js_delete":"deleteSubmission","click .js_download":"downloadSubmission"},DataSetFileUploadListView.prototype.initialize=function(options){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.dataset=options.dataset,this.listenTo(this.dataset,"change",this.render),this.listenTo(this.dataset,"reset",this.render),this.challenge=options.challenge,this.listenTo(this.challenge,"change",this.render),this.listenTo(this.challenge,"reset",this.render),this.parent=options.parent,this.data_set_file_submissions=options.data_set_file_submissions},DataSetFileUploadListView.prototype.render=function(){return this.challenge.sync_status?(this.data_set_file_submission=this.get_data_set_file_submission(),$(this.el).html(HR.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),dataset:this.dataset,_dataset:this.dataset.toJSON(),challenge:this.challenge,_challenge:this.challenge.toJSON(),data_set_file_submission:this.data_set_file_submission})),this._tpoll(),this):this},DataSetFileUploadListView.prototype._tpoll=function(){return this.tpoll?void 0:(this.tpoll=_.throttle(this.poll,1e3),this.tpoll())},DataSetFileUploadListView.prototype.poll=function(){var that;return this.data_set_file_submission&&this.data_set_file_submission.get("validation_status")>0&&this.data_set_file_submission.get("validation_status")<3&&!this.polling?this.$(".row").offset()&&this.$(".row").offset().top?(this.polling=!0,that=this,$.ajax({url:this.data_set_file_submission.url(),type:"GET",success:function(data){return that.polling=!1,data&&data.status&&data.model&&data.model.validation_status&&data.model.validation_status>0&&data.model.validation_status<3?setTimeout(function(){return that.tpoll()},1500):data&&data.status&&data.model&&data.model.validation_status&&data.model.validation_status>=3?that.update_validation_status(data.model.validation_status):data&&data.status&&data.model&&0===data.model.validation_status?that.update_validation_status(data.model.validation_status):void 0},error:function(){return that.polling=!1}})):(that=this,setTimeout(function(){return that.tpoll()},1500),void 0):void 0},DataSetFileUploadListView.prototype.update_validation_status=function(status){return this.data_set_file_submission=this.get_data_set_file_submission(),this.data_set_file_submission.get_validation_status(status)?(this.$(".js_validation_status").show(),this.$(".js_validation_status").css("color",this.data_set_file_submission.get_validation_status_color(status)),this.$(".js_validation_status").html(this.data_set_file_submission.get_validation_status(status))):this.$(".js_validation_status").hide()},DataSetFileUploadListView.prototype.get_data_set_file_submission=function(){var challenge_id,contest,data_set_file_submission,dataset_file_id,dataset_id;return challenge_id=this.challenge.get("id"),dataset_id=this.dataset.get("id"),dataset_file_id=this.model.get("id"),contest=HR.contest(),data_set_file_submission=_.first(_.filter(this.data_set_file_submissions.models,function(data_set_file_submission){return data_set_file_submission.get("challenge_id")===challenge_id&&data_set_file_submission.get("data_set_id")===dataset_id&&data_set_file_submission.get("data_set_file_id")===dataset_file_id})),data_set_file_submission&&(data_set_file_submission.set_challenge_slug(this.challenge.get("slug")),data_set_file_submission.set_contest_slug(contest.get("slug"))),data_set_file_submission},DataSetFileUploadListView.prototype.uploadSubmissionPrompt=function(){return this.$(".js_payload").click()},DataSetFileUploadListView.prototype.uploadSubmission=function(e){var data_set_file_submission,file,files,formData,that;return files=$(e.currentTarget).get(0).files,0===files.length||this.$(".js_upload").hasClass("disabled")?void 0:(file=files[0],file.size>this.model.get("upload_limit")?alert("Please upload a file smaller than "+this.model.get("human_readable_upload_limit")):(this.$(".js_upload").addClass("disabled"),this.$(".js_label").html(file.name).show(),this.$(".js_uploading").show(),that=this,data_set_file_submission=this.get_sample_data_set_file_submission(),formData=new FormData(this.$("form").get(0)),$.ajax({url:data_set_file_submission.url().split("?")[0],type:"POST",data:formData,cache:!1,contentType:!1,processData:!1,success:function(response){return that.resetUploadInputBox(),that.$(".js_uploading").hide(),that.$(".js_upload").removeClass("disabled"),response.status?(that.$(".js_upload").hide(),that.$(".js_download").show(),that.$(".js_delete").show(),that.$(".js_label").html(""+response.model.file_name+" &nbsp;&nbsp;&nbsp;("+response.model.human_readable_file_size+")").show(),that.data_set_file_submissions.add([new HR.DataSetFileSubmissionModel(response.model)],{silent:!0}),that.update_validation_status(response.model.validation_status),that.tpoll()):(that.$(".js_label").hide(),alert(response.message||"Error occured! Please try again"))},error:function(){return that.resetUploadInputBox(),that.$(".js_uploading").hide(),that.$(".js_upload").removeClass("disabled"),that.$(".js_label").hide(),alert("Error occured! Please try again")}})))},DataSetFileUploadListView.prototype.resetUploadInputBox=function(){return this.$("form.js_playload_wrap input[type=file]").unbind().remove(),this.$("form.js_playload_wrap").prepend('<input type="file" class="hide js_payload" name="payload">'),this.delegateEvents()},DataSetFileUploadListView.prototype.downloadSubmission=function(){return window.open(this.get_data_set_file_submission().url().split("?").join("/download?"),"_blank")},DataSetFileUploadListView.prototype.get_sample_data_set_file_submission=function(){var contest,data_set_file_submission,that;return that=this,contest=HR.contest(),data_set_file_submission=new HR.DataSetFileSubmissionModel({data_set_id:this.dataset.get("id"),data_set_file_id:this.model.get("id")}),data_set_file_submission.set_challenge_slug(this.challenge.get("slug")),data_set_file_submission.set_contest_slug(contest.get("slug")),data_set_file_submission},DataSetFileUploadListView.prototype.deleteSubmission=function(e){var challenge,contest,that;if(!$(e.currentTarget).hasClass("disabled"))return $(e.currentTarget).addClass("disabled"),this.$(".js_removing").show(),contest=HR.contest(),challenge=this.challenge,that=this,this.data_set_file_submission=this.get_data_set_file_submission(),this.data_set_file_submission.set_challenge_slug(this.challenge.get("slug")),this.data_set_file_submission.set_contest_slug(contest.get("slug")),this.data_set_file_submission.destroy({success:function(){return that.$(".js_upload").show(),that.$(".js_removing").hide(),that.$(".js_download").hide(),that.$(".js_delete").hide(),that.$(".js_label").hide(),that.data_set_file_submissions.remove([this.data_set_file_submission],{silent:!0}),that.$(".js_validation_status").hide(),$(e.currentTarget).removeClass("disabled")},error:function(){return that.$(".js_removing").hide(),$(e.currentTarget).removeClass("disabled"),alert("Error occured! Please try again")}})},DataSetFileUploadListView}(window.HR.GenericView),HR=window.HR||{},HR.DataSetFileUploadListView=DataSetFileUploadListView})}).call(this);

